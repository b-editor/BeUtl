<UserControl
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:BEditor.PackageInstaller.ViewModels"
    xmlns:res="using:BEditor.LangResources"
    x:DataType="vm:MainPageViewModel"
    mc:Ignorable="d" d:DesignWidth="450" d:DesignHeight="400"
    x:Class="BEditor.PackageInstaller.Views.MainPage">
    <UserControl.DataContext>
        <vm:MainPageViewModel/>
    </UserControl.DataContext>
    <Grid RowDefinitions="*,Auto">
        <ScrollViewer Margin="16">
            <StackPanel>
                <TextBlock
                    Margin="0,8,0,0"
                    IsVisible="{CompiledBinding !InstallsIsEmpty.Value, Mode=OneWay}"
                    Text="{x:Static res:Strings.Install}" />

                <ListBox
                    IsVisible="{CompiledBinding !InstallsIsEmpty.Value, Mode=OneWay}"
                    Items="{CompiledBinding Installs, Mode=OneTime}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid RowDefinitions="*,*">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="{Binding Name}" />

                                    <TextBlock Text="{Binding Version}" />
                                </StackPanel>

                                <TextBlock
                                    Margin="0,8"
                                    Grid.Row="1"
                                    VerticalAlignment="Bottom"
                                    Text="{Binding Author}" />
                                <TextBlock
                                    Margin="0,8"
                                    Grid.Row="1"
                                    Text="{Binding License}"
                                    HorizontalAlignment="Right" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <TextBlock
                    Margin="0,8,0,0"
                    IsVisible="{CompiledBinding !UninstallsIsEmpty.Value, Mode=OneWay}"
                    Text="{x:Static res:Strings.Uninstall}" />

                <ListBox
                    IsVisible="{CompiledBinding !UninstallsIsEmpty.Value, Mode=OneWay}"
                    Items="{CompiledBinding Uninstalls, Mode=OneTime}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid RowDefinitions="*,*">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="{Binding Name}" />

                                    <TextBlock Text="{Binding Version}" />
                                </StackPanel>

                                <TextBlock
                                    Margin="0,8"
                                    Grid.Row="1"
                                    VerticalAlignment="Bottom"
                                    Text="{Binding Author}" />
                                <TextBlock
                                    Margin="0,8"
                                    Grid.Row="1"
                                    Text="{Binding License}"
                                    HorizontalAlignment="Right" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <TextBlock
                    Margin="0,8,0,0"
                    IsVisible="{CompiledBinding !UpdatesIsEmpty.Value, Mode=OneWay}"
                    Text="{x:Static res:Strings.Update}" />

                <ListBox
                    IsVisible="{CompiledBinding !UpdatesIsEmpty.Value, Mode=OneWay}"
                    Items="{CompiledBinding Updates, Mode=OneTime}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid RowDefinitions="*,*">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="{Binding Name}" />

                                    <TextBlock Text="{Binding Version}" />
                                </StackPanel>

                                <TextBlock
                                    Margin="0,8"
                                    Grid.Row="1"
                                    VerticalAlignment="Bottom"
                                    Text="{Binding Author}" />
                                <TextBlock
                                    Margin="0,8"
                                    Grid.Row="1"
                                    Text="{Binding License}"
                                    HorizontalAlignment="Right" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </ScrollViewer>

        <ProgressBar
            IsIndeterminate="True"
            IsVisible="{CompiledBinding IsLoading.Value, Mode=OneWay}"
            Margin="16" />

        <Border
            Grid.Row="1"
            BorderBrush="{StaticResource ControlElevationBorderBrush}"
            BorderThickness="1"
            CornerRadius="{StaticResource OverlayCornerRadius}"
            Background="{StaticResource NavigationViewContentBackground}">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock
                    Text="{x:Static res:Strings.ByClickingModify}"
                    Margin="16"
                    TextWrapping="WrapWithOverflow" />

                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="16" Spacing="8">
                    <Button
                        Classes="accent"
                        Content="{x:Static res:Strings.Modify}"
                        Click="ModifyClick"
                        IsDefault="True" />
                    <Button
                        Content="{x:Static res:Strings.Cancel}"
                        Click="CancelClick"
                        IsCancel="True" />
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
