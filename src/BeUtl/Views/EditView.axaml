<UserControl
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="using:BeUtl.Views"
    xmlns:editors="using:BeUtl.Views.Editors"
    xmlns:ui="using:FluentAvalonia.UI.Controls"
    xmlns:uip="using:FluentAvalonia.UI.Controls.Primitives"
    xmlns:vm="using:BeUtl.ViewModels"
    mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="720"
    x:DataType="vm:EditViewModel"
    x:Class="BeUtl.Views.EditView">
    <UserControl.Styles>
        <Style Selector="GridSplitter.EditViewSplitter">
            <Setter Property="Background" Value="Transparent" />
        </Style>
    </UserControl.Styles>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="7*" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="2*" MinWidth="300" />
        </Grid.ColumnDefinitions>

        <!--RightPanel-->
        <ui:TabView
            Grid.Column="4"
            Margin="0,4,0,0"
            CornerRadius="4,0,0,4"
            SelectedIndex="0"
            TabWidthMode="SizeToContent"
            VerticalAlignment="Stretch"
            Classes="bottom"
            x:Name="RightTabView"
            IsAddTabButtonVisible="False" />

        <!--LeftPanel-->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" MinHeight="300" />
            </Grid.RowDefinitions>

            <!--BottomPanel-->
            <ui:TabView
                Grid.Row="2"
                x:Name="BottomTabView"
                Margin="2,0,0,0"
                TabWidthMode="SizeToContent"
                VerticalAlignment="Stretch"
                Classes="bottom"
                IsAddTabButtonVisible="False" />

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" MinWidth="270" />
                </Grid.ColumnDefinitions>
                <Border
                    Classes="CardStyle"
                    Grid.Column="2"
                    Margin="0,4,0,0">
                    <local:Library />
                </Border>

                <GridSplitter
                    Grid.Column="1"
                    Classes="EditViewSplitter" />

                <Player
                    x:Name="Player"
                    Margin="4,0"
                    Source="{CompiledBinding Player.PreviewImage.Value, Mode=OneWay}"
                    IsPlaying="{CompiledBinding Player.IsPlaying.Value, Mode=TwoWay}"
                    PlayButtonCommand="{CompiledBinding Player.PlayPause}"
                    NextButtonCommand="{CompiledBinding Player.Next}"
                    PreviousButtonCommand="{CompiledBinding Player.Previous}"
                    StartButtonCommand="{CompiledBinding Player.Start}"
                    EndButtonCommand="{CompiledBinding Player.End}"
                    Maximum="{Binding Scene.Duration, Converter={StaticResource TimeSpanToDoubleConverter}}"
                    Value="{Binding Scene.CurrentFrame, Converter={StaticResource TimeSpanToDoubleConverter}}"
                    Duration="{Binding Scene.Duration, StringFormat={}{0:hh\\:mm\\:ss\\.ff}}"
                    CurrentTime="{Binding Scene.CurrentFrame, StringFormat={}{0:hh\\:mm\\:ss\\.ff}}" />
            </Grid>

            <GridSplitter
                Grid.Row="1"
                Classes="EditViewSplitter" />

        </Grid>

        <GridSplitter
            Grid.Column="1"
            Classes="EditViewSplitter" />

    </Grid>
</UserControl>
